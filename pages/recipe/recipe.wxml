<view class="container">
  <scroll-view scroll-y="true" class="recipe-list" enhanced show-scrollbar="{{false}}">
    <view class="recipe-card" wx:for="{{recipes}}" wx:key="id" 
      bindtap="onTapRecipe" data-name="{{item.name}}">
      <view class="card-left">
        <image 
          class="recipe-img" 
          wx:if="{{item.image}}" 
          src="{{item.image}}" 
          mode="aspectFill"
          lazy-load
        ></image>
      </view>
      
      <view class="card-right">
        <view class="recipe-header">
          <text class="recipe-name">{{item.name}}</text>
        </view>
        <view class="ingredients-box">
          <view class="tag">🥕 食材</view>
          <text class="recipe-desc">{{item.desc}}</text>
        </view>
      </view>
    </view>
    
    <view style="height: 180rpx;"></view>
  </scroll-view>

  <view class="fab-btn" bindtap="showPopup" hover-class="fab-active">
    <view class="plus-icon"></view>
  </view>

  <view class="popup-mask" wx:if="{{isPopupVisible}}" bindtap="hidePopup"></view>
  <view class="popup-content {{isPopupVisible ? 'popup-show' : ''}}">
    <view class="popup-header">🍳 新增私人菜谱</view>
    <view class="input-group">
      <input class="popup-input" placeholder="菜名（如：番茄炒蛋）" model:value="{{newName}}" />
      <textarea class="popup-textarea" placeholder="食材清单（如：鸡蛋、番茄、小葱）" model:value="{{newDesc}}" />
      <view class="image-placeholder" bindtap="chooseImage">
        <image wx:if="{{tempImagePath}}" src="{{tempImagePath}}" mode="aspectFill"></image>
        <view wx:else class="upload-tip">
          <view class="upload-icon">
            <view class="icon-plus"></view>
          </view>
          <text>上传菜品照片</text>
          <text class="upload-sub-tip">😋😋😋</text>
        </view>
      </view>
    </view>
    <view class="popup-footer">
      <button class="btn-cancel" bindtap="hidePopup">再想想</button>
      <button class="btn-confirm" bindtap="addRecipe">确认入库</button>
    </view>
  </view>
</view>

<view class="ask-mask {{showAskPopup ? 'mask-show' : ''}}" bindtap="closeAskPopup"></view>
<view class="ask-popup {{showAskPopup ? 'ask-show' : ''}}">
  <view class="ask-header">
    <text class="ask-icon">😋</text>
    <view class="ask-title">心动信号</view>
  </view>
  <view class="ask-content">
    你是不是想吃 <text class="dish-highlight">「{{selectedDish}}」</text> 了？
  </view>
  <view class="ask-footer">
    <button class="ask-btn-cancel" bindtap="closeAskPopup">没，我就看看</button>
    <button class="ask-btn-confirm" bindtap="notifyEric">告诉 Eric</button>
  </view>
</view>